<script src="../../../../services/nx-language-provider.ts" xmlns="http://www.w3.org/1999/html"></script>
<div class="nx-search container p-3">
    <div class="row">
        <div class="col-12">
            <div class="row no-left-padding vertical-align">
                <div class="col-12 no-left-padding no-right-padding pl-0">
                    <div class="btn-group" style="width: 100%;">
                        <span class="glyphicon glyphicon-search icon-search"></span>
                        <input [(ngModel)]="filter.query" id="searchinput" type="text" class="form-control"
                               name="query"
                               style="width: 100%;"
                               placeholder="Search"/>
                        <span id="searchclear" class="glyphicon close-icon"
                              [hidden]="!filter.query" (click)="resetQuery()"></span>
                    </div>
                </div>
            </div>
            <div class="row no-left-padding vertical-align mt-2">
                <div class="col-12 dropdown" style="min-height: 50px; display:table-cell"
                     [ngClass]="{'show': showAdvancedOptions}" (nxClickElsewhere)="show = false">
                    <div class="area d-flex justify-content-between">
                        <div class="d-flex justify-content-start">
                            <div class="nav-arrow">
                                <span></span>
                                <span></span>
                            </div>
                            <div>
                                <a href="javascript:void(0);" (click)="showAdvancedOptions = ! showAdvancedOptions">Advanced
                                    search</a>
                            </div>
                        </div>
                        <div *ngIf="numberFilters != 0">
                                <span [ngSwitch]="numberFilters">
                                        <span *ngSwitchCase="1">
                                        1 filter applied
                                    </span>
                                        <span *ngSwitchDefault>
                                        {{numberFilters}} filters applied
                                    </span>
                                </span>
                            <span>
                                    <a href="javascript:void(0);" (click)="resetFilters()">Clear All</a>
                                </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row vdivide margin-compensate" *ngIf="showAdvancedOptions">
                <div class="col-md-3 col-lg-2">
                    <h4>Minimum Resolution</h4>
                    <nx-select name="resSelect"
                               [items]="multiselectOptions.resolutions"
                               label="optionLabel"
                               [(ngModel)]="filter.resolution"
                               (onSelected)="modelChanged('resolutions', $event)"
                               [selected]="filter.resolution ? filter.resolution : null"
                               required>
                    </nx-select>
                </div>
                <div class="col-md-3 col-lg-2">
                    <h4>Manufacturers</h4>
                    <nx-multi-select name="vdMultiSelect"
                                     [items]="multiselectOptions.vendors"
                                     [ngModel]="filter.vendors"
                                     (ngModelChange)="modelChanged('vendors', $event)"
                                     canSelectAll>
                    </nx-multi-select>
                </div>
                <div class="col-md-3 col-lg-2">
                    <h4>Types</h4>
                    <nx-multi-select name="hdMultiSelect"
                                     [items]="multiselectOptions.hardwareTypes"
                                     [ngModel]="filter.hardwareTypes"
                                     (ngModelChange)="modelChanged('hardwareTypes', $event)"
                                     canSelectAll>
                    </nx-multi-select>
                </div>
            </div>
            <div class="row vdivide margin-compensate" [hidden]="!showAdvancedOptions">
                <div class="col-md-3 col-lg-6 mt-3">
                    <div class="form-group">
                        <h4>Features</h4>
                        <nav aria-label="Cameras table navigation">
                            <ul class="pagination">
                                <li class="tags ml-0">
                                    <nx-tag
                                            name="isAudioSupported"
                                            [(ngModel)]="filter.isAudioSupported"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isAudioSupported === null ? false : filter.isAudioSupported">
                                        Audio
                                    </nx-tag>
                                </li>
                                <li class="tags">
                                    <nx-tag
                                            name="isTwAudioSupported"
                                            [(ngModel)]="filter.isTwAudioSupported"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isTwAudioSupported === null ? false : filter.isTwAudioSupported">
                                        2-Way Audio
                                    </nx-tag>
                                </li>
                                <li class="tags">
                                    <nx-tag
                                            name="isPtzSupported"
                                            [(ngModel)]="filter.isPtzSupported"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isPtzSupported === null ? false : filter.isPtzSupported">PTZ
                                    </nx-tag>
                                </li>
                                <li class="tags">
                                    <nx-tag
                                            name="isAptzSupported"
                                            [(ngModel)]="filter.isAptzSupported"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isAptzSupported === null ? false : filter.isAptzSupported">
                                        Advanced PTZ
                                    </nx-tag>
                                </li>
                                <li class="tags">
                                    <nx-tag
                                            name="isFisheye"
                                            [(ngModel)]="filter.isFisheye"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isFisheye === null ? false : filter.isFisheye">Fisheye
                                    </nx-tag>
                                </li>
                                <li class="tags">
                                    <nx-tag
                                            name="isMdSupported"
                                            [(ngModel)]="filter.isMdSupported"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isMdSupported === null ? false : filter.isMdSupported">
                                        Motion
                                    </nx-tag>
                                </li>
                                <li class="tags">
                                    <nx-tag
                                            name="isIoSupported"
                                            [(ngModel)]="filter.isIoSupported"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isIoSupported === null ? false : filter.isIoSupported">I/O
                                    </nx-tag>
                                </li>
                                <li class="tags">
                                    <nx-tag
                                            name="isH265"
                                            [(ngModel)]="filter.isH265"
                                            (onClick)="selectBooleanFilter($event)"
                                            [value]="filter.isH265 === null ? false : filter.isH265">H.265
                                    </nx-tag>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
