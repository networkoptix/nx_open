{% extends "installation/server_ctl_base.sh.jinja2" %}


{%- block variables -%}

SERVER_COUNT={{ SERVER_COUNT }}
SERVER_PORT_BASE={{ SERVER_PORT_BASE }}
LOG_PATH_BASE={{ LOG_PATH_BASE }}
TEST_TMP_DIR={{ TEST_TMP_DIR }}
CAMERAS_PER_SERVER={{ CAMERAS_PER_SERVER|default(5, true) }}
PROPERTIES_PER_CAMERA={{ PROPERTIES_PER_CAMERA|default(5, true) }}
USERS_PER_SERVER={{ USERS_PER_SERVER|default(4, true) }}

{{- super() -}}

BIN_DIR="$SERVER_DIR/bin"
STOP_TIMEOUT_SEC=30
CORE_DUMP_TIMEOUT_SEC=300
BIN_PATH="$BIN_DIR/appserver2_ut"
ARGS_LIST=(
	--log-file=$LOG_PATH_BASE
	--log-level=WARNING
	--gtest_filter=P2pMessageBusTest.FullConnect
	--standaloneMode
	--serverCount=$SERVER_COUNT
	--cameraCount=$CAMERAS_PER_SERVER
	--propertyCount=$PROPERTIES_PER_CAMERA
	--userCount=$USERS_PER_SERVER
	--tcpPort=$SERVER_PORT_BASE
	--tmp=$TEST_TMP_DIR
    )
ARGS="${ARGS_LIST[@]}"
ADD_LD_LIBRARY_PATH="$SERVER_DIR/lib"

{%- endblock variables -%}
