<div class="container"><h1>Advanced server settings</h1><div class="alert alert-danger" role="alert"><b>Warning!</b> Any changes on this page may cause server failure. Please, use carefully.</div><h2>Storages</h2><form class="form" role="form" name="form" novalidate><table class="table"><thead><tr><th>Url<th width="200">Free Space<th width="150">Reserved Space<th><th width="70">&nbsp;<tbody><tr ng-repeat="storage in storages" ng-form="storageForm"><td><span class="read-container storage-url" title="{{storage.url}}" class="storage-url">{{storage.url}}</span><td><div class="progress" style="margin-top:5px" ng-if="storage.accessible" title="Reserved: {{formatSpace(storage.reservedSpace)}}, &#013;Free: {{formatSpace(storage.freeSpace)}}, &#013;Occupied: {{formatSpace(storage.totalSpace-storage.freeSpace)}}, &#013;Total: {{formatSpace(storage.totalSpace)}}"><div class="progress-overlay progress-bar progress-bar-warning progress-bar-striped" role="progressbar" ng-style="{width: storage.reservedSpace*100/storage.totalSpace+ '%'}"></div><div class="progress-label">{{formatSpace(storage.freeSpace)}} of {{formatSpace(storage.totalSpace)}}</div><div class="progress-bar progress-bar-success" role="progressbar" ng-style="{width: (storage.freeSpace)*100/storage.totalSpace + '%'}"></div><div class="progress-bar progress-bar-danger" ng-style="{width: 100-storage.freeSpace*100/storage.totalSpace +'%'}"></div></div><div class="progress" style="margin-top:5px" ng-if="!storage.accessible"><div class="progress-bar progress-bar-danger" style="width:100%">Inaccessible</div></div><td><div class="input-group" ng-if="storage.isWritable" ng-class="{'has-error':!storageForm.reservedSpaceGb.$valid,
                             'has-warning':storage.reservedSpace >= storage.freeSpace}"><input type="number" class="form-control input-sm" ng-model="storage.reservedSpaceGb" name="reservedSpaceGb" min="1" max="{{toGBs(storage.totalSpace)}}" required placeholder="Reserved space"><div class="input-group-addon">GB</div></div><div class="input-group" ng-if="!storage.isWritable"><input type="number" class="form-control input-sm" ng-value="storage.reservedSpaceGb" disabled placeholder="Reserved space"><div class="input-group-addon">GB</div></div><td ng-class="{'has-error':!storageForm.isUsedForWriting.$valid}"><label class="read-container"><span class="checkbox-wrapper"><input type="checkbox" class="isUsedForWriting" ng-model="storage.isUsedForWriting" ng-disabled="!storage.isWritable" name="isUsedForWriting" placeholder="Use for writing"></span><icon for="storage.isUsedForWriting" on-true="pencil" title-true="Used for writing"></icon><icon for="storage.isWritable && !storage.isUsedForWriting" on-true="pencil" title-true="Writable" class="icon-inactive"></icon></label><td><span class="read-container"><icon for="storage.isExternal" on-true="globe" on-false="hdd" title-true="External" title-false="Internal"></icon><icon for="storage.isBackup" on-true="floppy-save" on-false="empty" title-true="Backup storage"></icon></span></table><div id="selectWritableStorageAlert" class="alert alert-warning" ng-class="{hidden:someSelected}">No main storage drive was selected for writing - video will not be recorded on this server.</div><div id="reduceArchiveAlert" class="alert alert-warning" ng-class="{hidden:!reduceArchiveWarning}">Set reserved space is greater than free space left. Possible partial remove of the video footage is expected.</div><div class="alert alert-danger" ng-class="{hidden:form.$valid}">Fix all settings, marked as red, to save it</div><button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="save()">Save</button> <button class="btn btn-warning" ng-click="cancel()">Cancel</button></form><h2>Log settings</h2><form class="form" role="form" name="logLevels" novalidate><div class="form-group"><label class="col-sm-4">Main log level</label><div class="col-sm-8"><select class="form-control" name="mainLogLevel" id="mainLogLevel" ng-model="mainLogLevel"><option value="NONE">None: Log disabled.<option value="ALWAYS">Always: Log only the most important messages.<option value="ERROR">Error: Log errors.<option value="WARNING">Warning: Log warnings.<option value="INFO">Info: Log information messages.<option value="DEBUG">Debug: Log debug messages.<option value="DEBUG2">Debug2: Log additional debug messages.</select></div></div><div class="form-group"><label class="col-sm-4">Transaction log level</label><div class="col-sm-8"><select class="form-control" name="transLogLevel" id="transLogLevel" ng-model="transLogLevel"><option value="NONE">None: Log disabled.<option value="ALWAYS">Always: Log only the most important messages.<option value="ERROR">Error: Log errors.<option value="WARNING">Warning: Log warnings.<option value="INFO">Info: Log information messages.<option value="DEBUG">Debug: Log debug messages.<option value="DEBUG2">Debug2: Log additional debug messages.</select></div></div><div class="col-sm-offset-4 col-sm-8"><button class="btn btn-primary" ng-click="changeLogLevels()">Save</button></div></form><h2>Manual update</h2><form class="form-horizontal" enctype="multipart/form-data" target="_blank" action="/api/installUpdate" method="post"><div class="form-group"><label class="col-sm-4">Upload installer</label><div class="col-sm-8"><fileupload text="Select server update archive (zip)"></fileupload><p class="help-block">Ensure you are using correct configuration.</p></div></div></form><h1>Advanced system settings</h1><div class="alert alert-danger" role="alert"><b>Warning!</b> Any changes on this page may cause system failure. Please, use carefully.</div><form class="form row" role="form" name="systemSettings" novalidate><div class="form-group" ng-repeat="(setting,value) in systemSettings"><label class="col-sm-6" for="{{setting}}">{{settingsConfig[setting].label}}</label><div class="col-sm-6"><input ng-if="settingsConfig[setting].type == 'checkbox' " type="checkbox" style="height: 22px" id="{{setting}}" ng-model="systemSettings[setting]"> <input ng-if="settingsConfig[setting].type == 'number' " type="number" id="{{setting}}" ng-model="systemSettings[setting]" class="form-control input-sm"> <input ng-if="settingsConfig[setting].type == 'text'" type="text" id="{{setting}}" ng-model="systemSettings[setting]" class="form-control input-sm"></div></div><div class="col-sm-offset-4 col-sm-8"><button class="btn btn-primary" ng-click="saveSystemSettings()">Save</button></div></form></div>