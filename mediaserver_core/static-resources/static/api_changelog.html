<div class="api_changelog" >

<!-- Style conventions in this document:

- This file will be embedded into a framing HTML to be shown to the user.
- Preserve it both a valid XML and an HTML renderable in a browser.
- Use only ASCII chars, Unix newlines, 4 spaces for indentation, lines up to 99 chars long.

Use the following tags for markup, among others:

<h2>Section header. Use only h2 and the lower levels.</h2>
<pre>
    One or more lines of code, indented as needed. Rendered in monospace.
</pre>
<em>Comment or note. Rendered in italics and gray.</em>
<strong>Most significant part of the text. Rendered in bold.</strong>
<i>Old chars in the renamed symbol. Rendered in red, non-italics.</i>
<b>New chars in the renamed symbol. Rendered in blue, non-bold.</b>
-->
<style type="text/css" scoped="scoped">
    code { color: inherit; }
    em { color: gray; font-family: inherit; }
    i { color: red; /* non-italics */ font-style: inherit; font-family: inherit; }
    b { color: blue; /* non-bold */ font-weight: inherit; font-family: inherit; }
</style>

<!--============================================================================================-->

Here the <strong>changes</strong> of Rest <strong>API</strong> from VMS version to version are
documented, which can potentially <strong>break compatibility</strong>. In particular, methods and
params can be <strong>renamed</strong>, though often <strong>deprecated names</strong> are
supported for a while, when noted below.

<!--============================================================================================-->
<hr/>
<h2>VMS <b>4.0</b> relative to <i>3.2</i></h2>

<!--============================================================================================-->
<h3>Breaking compatibility</h3>

Params <strong><code>scheduleTask.<i>beforeThreshold</i></code></strong> and <strong><code>
scheduleTask.<i>afterThreshold</i></code></strong> were removed in favor of the new <strong><code><b>
recordBeforeMotionSec</b></code></strong> and <strong><code><b>recordAfterMotionSec</b></code>
</strong> params in methods:
<pre>
    /ec2/saveCameraUserAttributesList
    /ec2/saveCameraUserAttributes
    /ec2/getCameraUserAttributesList
    /ec2/getCamerasEx
</pre>
<p/>

Added optional param <strong><code><b>currentPassword</b></code></strong>, which is required if new
<strong><code>password</code></strong> is provided in methods:
<pre>
    /api/configure
    /api/detachFromCloud
</pre>
<p/>

Added required param <strong><code><b>currentPassword</b></code></strong> in method
<strong><code>/api/restoreState</code></strong>.

<!--============================================================================================-->
<h3>Retaining compatibility</h3>

Removed param <strong><code>scheduleTask.<i>recordAudio</i></code></strong>
(was not used) in methods:
<pre>
    /ec2/saveCameraUserAttributesList
    /ec2/saveCameraUserAttributes
    /ec2/getCameraUserAttributesList
    /ec2/getCamerasEx
</pre>

<!-- <em>[proprietary]</em> Made <strong><i>GET</i></strong> deprecated in favor of <strong><b>POST</b></strong> in method
<strong><code>/api/activateLicense</code></strong> (deprecated method support expires after 4.0).
-->

<!--============================================================================================-->
<hr/>
<h2>VMS <b>3.2</b> relative to <i>3.1</i></h2>

<!--............................................................................................-->
<h3>Breaking compatibility</h3>

Deleted deprecated method <strong><code><i>/api/image</i></code></strong>.

<!--............................................................................................-->
<h3>Retaining compatibility until expired</h3>

Made <strong><i>GET</i></strong> deprecated in favor of <strong><b>POST</b></strong> in method
<strong><code>/api/detachFromCloud</code></strong>
(deprecated method support expires after 3.2).
<p/>

Renamed certain param values in method <strong><code>/ec2/cameraThumbnail</code></strong>
(deprecated values support expires after 3.2):
<pre>
    Param <strong><code>imageFormat</code></strong> values:
        <i>jpeg</i> -> <b>jpg</b>
        <i>tiff</i> -> <b>tif</b>

    Param <strong><code>roundMethod</code></strong> values:
        <i>exact</i> -> <b>precise</b>
</pre>

<!--............................................................................................-->
<h3>Errata fixed in the API documentation (not changing API behavior)</h3>

Fixed param and value names in method <strong><code>/ec2/cameraThumbnail</code></strong>:
<pre>
    Param <strong><code>imageFormat</code></strong> values:
        <i>PngFormat</i> -> <b>png</b>
        <i>JpgFormat</i> -> <b>jpg</b>
        <i>TiffFormat</i> -> <b>tif</b>
        <i>RawFormat</i> -> <b>raw</b>

    Param <strong><code><i>method</i> -> <b>roundMethod</b></code></strong> values:
        <i>KeyFrameBeforeMethod</i> -> <b>before</b>
        <i>PreciseMethod</i> -> <b>precise</b>
        <i>KeyFrameAfterMethod</i> -> <b>after</b>
</pre>

Fixed method URL prefix:
<strong><code><i>/api</i>/execAction -> <b>/ec2</b>/execAction</code></strong>.

<!--============================================================================================-->
<hr/>
<h2>VMS <b>3.1</b> relative to <i>3.0</i></h2>

<!--............................................................................................-->
<h3>Retaining compatibility until expired</h3>

Changed <strong><i>GET</i> -> <b>POST</b></strong> in method
<strong><code>/api/mergeSystems</code></strong>
(deprecated method support expires after 3.2). Check changed params in the API documentation.

<!--============================================================================================-->
<hr/>
<h2>VMS <b>3.0</b> relative to <i>2.6</i></h2>

<!--............................................................................................-->
<h3>Breaking compatibility</h3>

Renamed methods:
<pre>
    /ec2/getServerUserAttributes -> /ec2/get<b>Media</b>ServerUserAttributes<b>List</b>
    /ec2/saveServerUserAttributes -> /ec2/save<b>Media</b>ServerUserAttributes
    /ec2/saveServerUserAttributesList -> /ec2/save<b>Media</b>ServerUserAttributesList
    /ec2/getCameraUserAttributes -> /ec2/getCameraUserAttributes<b>List</b>
    /api/<i>business</i>Events -> /api/<b>get</b>Events
    /ec2/get<i>Business</i>Rules -> /ec2/get<b>Event</b>Rules
<!-- Proprietary methods commented out:
    <em>[proprietary]</em> /ec2/getClientInfo<i>s</i> -> /ec2/getClientInfo<b>List</b>
    <em>[proprietary]</em> /ec2/save<i>Business</i>Rule -> /ec2/save<b>Event</b>Rule
    <em>[proprietary]</em> /ec2/remove<i>Business</i>Rule -> /ec2/remove<b>Event</b>Rule
    <em>[proprietary]</em> /ec2/reset<i>Business</i>Rules -> /ec2/reset<b>Event</b>Rules
    <em>[proprietary]</em> /ec2/broadcast<i>Business</i>Action -> /ec2/broadcastAction
    <em>[proprietary]</em> /ec2/exec<i>Business</i>Action -> /ec2/execAction
--></pre>

Changed <strong>reply</strong> format <strong><i>XML</i> -> <b>JSON</b></strong> in methods:
<pre>
    /api/manualCamera/search
    /api/manualCamera/status
    /api/manualCamera/stop
    /api/statistics
    /api/storageSpace
    /api/storageStatus
</pre>

<!--............................................................................................-->
<h3>Retaining compatibility until expired</h3>

Replaced method <strong><code><i>/api/image</i> -> <b>/ec2/cameraThumbnail</b></code></strong>
(deprecated method support expires after 3.1). The new method can get thumbnails from cameras
located on other servers (the old one can not).
<p/>

Renamed param <strong><code>cameraI<i>D</i> -> cameraI<b>d</b></code></strong>
(deprecated name support expires after 3.2) in methods:
<pre>
    /ec2/getCamerasEx
    /ec2/getCameraUserAttributesList
    /ec2/saveCameraUserAttributesList
    /ec2/saveCameraUserAttributes
</pre>

Renamed param <strong><code>serverI<i>D</i> -> serverI<b>d</b></code></strong>
(deprecated name support expires after 3.2) in methods:
<pre>
    /ec2/getMediaServerUserAttributesList
    /ec2/saveMediaServerUserAttributesList
    /ec2/saveMediaServerUserAttributes
</pre>

Renamed param <strong><code>ph<i>i</i>sicalMemory -> ph<b>y</b>sicalMemory</code></strong>
(deprecated name support expires after 3.2) in methods:
<pre>
    /ec2/saveClientInfo
    /ec2/getClientInfoList
</pre>

Renamed param <strong><code>prefe<i>r</i>edServerId -> prefe<b>rr</b>edServerId</code></strong>
(deprecated name support expires after 3.2) in methods:
<pre>
    /ec2/saveCameraUserAttributesList
    /ec2/saveCameraUserAttributes
    /ec2/getCameraUserAttributesList
    /ec2/getCamerasEx
</pre>

Renamed param <strong><code><i>res_id </i>-> <b>cameraId</b></code></strong>
(deprecated name support expires after 3.2) in methods:
<pre>
    /api/doCameraDiagnosticsStep
    /api/setCameraParam
    /api/getCameraParam
</pre>

Renamed param <strong><code><i>resource</i>Id -> <b>camera</b>Id</code></strong>
(deprecated name support expires after 3.2) in methods:
<pre>
    /api/ptz
</pre>

Renamed and merged together params
<strong><code><i>mac</i> + <i>physicalId</i> -> <b>cameraId</b></code></strong>
in method <strong><code>/ec2/bookmarks</code></strong>
(deprecated names support expires after 3.2).
<p/>

Renamed param <strong><code><i>physical</i>Id -> <b>camera</b>Id</code></strong>
(deprecated name support expires after 3.2) in methods:
<pre>
    /api/image
    /api/getEvents
    /ec2/recordedTimePeriods
</pre>

Changed <strong><i>GET</i> -> <b>POST</b></strong> in method
<strong><code>/api/manualCamera/add</code></strong>
(deprecated method support expires after 3.2). Check changed params in the API documentation.
<p/>

Renamed param
<strong><code><i>timeSinseEpochMs</i> -> <b>timeSinceEpochMs</b></code></strong>
in method <strong><code>/ec2/getTimeOfServers</code></strong>
<p/>

</div>
