<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>NVIDIA Tegra Multimedia API Framework: samples/backend/v4l2_backend_test.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>samples/backend/v4l2_backend_test.h</h1><a href="v4l2__backend__test_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2016, NVIDIA CORPORATION. All rights reserved.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00005"></a>00005 <span class="comment"> * modification, are permitted provided that the following conditions</span>
<a name="l00006"></a>00006 <span class="comment"> * are met:</span>
<a name="l00007"></a>00007 <span class="comment"> *  * Redistributions of source code must retain the above copyright</span>
<a name="l00008"></a>00008 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
<a name="l00009"></a>00009 <span class="comment"> *  * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span>
<a name="l00011"></a>00011 <span class="comment"> *    documentation and/or other materials provided with the distribution.</span>
<a name="l00012"></a>00012 <span class="comment"> *  * Neither the name of NVIDIA CORPORATION nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment"> *    contributors may be used to endorse or promote products derived</span>
<a name="l00014"></a>00014 <span class="comment"> *    from this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY</span>
<a name="l00017"></a>00017 <span class="comment"> * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00018"></a>00018 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</span>
<a name="l00019"></a>00019 <span class="comment"> * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR</span>
<a name="l00020"></a>00020 <span class="comment"> * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</span>
<a name="l00021"></a>00021 <span class="comment"> * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</span>
<a name="l00022"></a>00022 <span class="comment"> * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</span>
<a name="l00023"></a>00023 <span class="comment"> * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY</span>
<a name="l00024"></a>00024 <span class="comment"> * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> */</span>
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef V4L2_BACKEND_TEST_H</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define V4L2_BACKEND_TEST_H</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "<a class="code" href="NvVideoDecoder_8h.html" title="Helper class for V4L2 Video Decoder.">NvVideoDecoder.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="NvVideoConverter_8h.html" title="Helper class for V4L2 Video Converter.">NvVideoConverter.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="NvEglRenderer_8h.html" title="NVIDIA Eagle Eye API: EGL Renderer API">NvEglRenderer.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "<a class="code" href="NvJpegEncoder_8h.html" title="NVIDIA Eagle Eye API: Image Encode API">NvJpegEncoder.h</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;queue&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;utility&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;semaphore.h&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include "<a class="code" href="nvosd_8h.html" title="NVOSD library to be used to draw rectangles and text over the frame for given parameters...">nvosd.h</a>"</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">using namespace </span>std;
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="v4l2__backend__test_8h.html#1238e1118683d2d6baebe4e31ce35d09">00045</a> <span class="preprocessor">#define JPEG_ENC_BUF_SIZE 5*1024*1024</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4e">00047</a> <span class="keyword">enum</span> <a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4e">slice_type_e</a>
<a name="l00048"></a>00048 {
<a name="l00049"></a><a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4e66eee1f2188c49c514a9a6f513295af2">00049</a>     <a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4e66eee1f2188c49c514a9a6f513295af2">SLICE_TYPE_P</a> = 0,
<a name="l00050"></a><a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4ef01d3fe73814ae73c11856780f71867b">00050</a>     <a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4ef01d3fe73814ae73c11856780f71867b">SLICE_TYPE_B</a> = 1,
<a name="l00051"></a><a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4e1a6eda0b61624660a13a6d9bc2429ed5">00051</a>     <a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4e1a6eda0b61624660a13a6d9bc2429ed5">SLICE_TYPE_I</a> = 2,
<a name="l00052"></a>00052 };
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452">00054</a> <span class="keyword">enum</span> <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452">nal_type_e</a>
<a name="l00055"></a>00055 {
<a name="l00056"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574522f9aaa490148ec77e4f1a4ee678d5b22">00056</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574522f9aaa490148ec77e4f1a4ee678d5b22">NAL_UNIT_EXTERNAL</a>                 = 0,
<a name="l00057"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb5745259e9c5af2da46fe7a2d51fa43ab26127">00057</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb5745259e9c5af2da46fe7a2d51fa43ab26127">NAL_UNIT_CODED_SLICE</a>              = 1,
<a name="l00058"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452356c9b13d682a7b83d3879cb6840634f">00058</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452356c9b13d682a7b83d3879cb6840634f">NAL_UNIT_CODED_SLICE_DATAPART_A</a>   = 2,
<a name="l00059"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452fee4ebddd25ff654d680fedad2e954e0">00059</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452fee4ebddd25ff654d680fedad2e954e0">NAL_UNIT_CODED_SLICE_DATAPART_B</a>   = 3,
<a name="l00060"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452ce0cedb4c33f430e59c50ac60e889291">00060</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452ce0cedb4c33f430e59c50ac60e889291">NAL_UNIT_CODED_SLICE_DATAPART_C</a>   = 4,
<a name="l00061"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452a641b2e28c7c244e45e28f99dfc63a54">00061</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452a641b2e28c7c244e45e28f99dfc63a54">NAL_UNIT_CODED_SLICE_IDR</a>          = 5,
<a name="l00062"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574523d98a3820bb76c1ec4a7401ca015619b">00062</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574523d98a3820bb76c1ec4a7401ca015619b">NAL_UNIT_SEI</a>                      = 6,
<a name="l00063"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb5745287cac3a362213e69d6c5b959471f6f98">00063</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb5745287cac3a362213e69d6c5b959471f6f98">NAL_UNIT_SPS</a>                      = 7,
<a name="l00064"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574520a937a1dcddd0ed49b7bbcc120a0a800">00064</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574520a937a1dcddd0ed49b7bbcc120a0a800">NAL_UNIT_PPS</a>                      = 8,
<a name="l00065"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574528fcb36b415d514a5fc9c1683724f31c8">00065</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574528fcb36b415d514a5fc9c1683724f31c8">NAL_UNIT_ACCESS_UNIT_DELIMITER</a>    = 9,
<a name="l00066"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452a8a662359b9208c0c213961922dd7fd6">00066</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452a8a662359b9208c0c213961922dd7fd6">NAL_UNIT_END_OF_SEQUENCE</a>          = 10,
<a name="l00067"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452c2c7e144eef26075bd707b6f4e586ee1">00067</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452c2c7e144eef26075bd707b6f4e586ee1">NAL_UNIT_END_OF_STREAM</a>            = 11,
<a name="l00068"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574527dcb8f34a9e6f830e6f13523e7da22c8">00068</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574527dcb8f34a9e6f830e6f13523e7da22c8">NAL_UNIT_FILLER_DATA</a>              = 12,
<a name="l00069"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452c483bd065332f7337e31c959e7034e6f">00069</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452c483bd065332f7337e31c959e7034e6f">NAL_UNIT_SUBSET_SPS</a>               = 15,
<a name="l00070"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574528c5dfdeb9a126add31b57b718eb32b46">00070</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb574528c5dfdeb9a126add31b57b718eb32b46">NAL_UNIT_CODED_SLICE_PREFIX</a>       = 14,
<a name="l00071"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452693f7e481367a7aad4420eb441703e8b">00071</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452693f7e481367a7aad4420eb441703e8b">NAL_UNIT_CODED_SLICE_SCALABLE</a>     = 20,
<a name="l00072"></a><a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452529b987b4774f544434418409d126cdd">00072</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452529b987b4774f544434418409d126cdd">NAL_UNIT_CODED_SLICE_IDR_SCALABLE</a> = 21
<a name="l00073"></a>00073 };
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00076"></a>00076 {
<a name="l00077"></a>00077     uint32_t window_height;
<a name="l00078"></a>00078     uint32_t window_width;
<a name="l00079"></a>00079 } <a class="code" href="structdisplay__resolution__t.html">display_resolution_t</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="structwindow__t.html">00081</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00082"></a>00082 {
<a name="l00083"></a><a class="code" href="structwindow__t.html#c3eb2fb8d948dade2486d21598204f0f">00083</a>     uint32_t window_height;
<a name="l00084"></a><a class="code" href="structwindow__t.html#d4fdbf32e7577204c951b1e7a298630b">00084</a>     uint32_t window_width;
<a name="l00085"></a><a class="code" href="structwindow__t.html#b87e109cae9b12a99483ea67da5491ec">00085</a>     uint32_t window_x;
<a name="l00086"></a><a class="code" href="structwindow__t.html#ec5932c010ec07e2be62e817ca77fb8a">00086</a>     uint32_t window_y;
<a name="l00087"></a><a class="code" href="structwindow__t.html#f03ae2d305de91fd0f6737ccc072b56d">00087</a>     uint32_t crop_height;
<a name="l00088"></a><a class="code" href="structwindow__t.html#c49fd2785f814a124502720d52c6a611">00088</a>     uint32_t crop_width;
<a name="l00089"></a><a class="code" href="structwindow__t.html#70ba1e011708a2aac2d0735ca0432be5">00089</a>     uint32_t crop_x;
<a name="l00090"></a><a class="code" href="structwindow__t.html#be0adf41c4f437d99149e6ea3d99c06f">00090</a>     uint32_t crop_y;
<a name="l00091"></a><a class="code" href="structwindow__t.html#3a8d9c35b5d87429435e51b6fe7e76d6">00091</a>     <span class="keywordtype">float</span>    alpha;
<a name="l00092"></a>00092 }<a class="code" href="structwindow__t.html">window_t</a>;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="keyword">class </span>GIE_Context;
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="v4l2__backend__test_8h.html#c9e445cf41a4652f95e1c2646b548882">00096</a> <span class="preprocessor">#define WINDOW_NUM 4</span>
<a name="l00097"></a><a class="code" href="v4l2__backend__test_8h.html#6511732d5b29a6781cf38783157f21e1">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define CHANNEL_NUM 4</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span>
<a name="l00099"></a><a class="code" href="v4l2__backend__test_8h.html#fa0afe0f1985a1b0b1c9ab28afa39075">00099</a> <span class="preprocessor">#define PARSER_DECODER_VIC_RENDER 0</span>
<a name="l00100"></a><a class="code" href="v4l2__backend__test_8h.html#873cca955d1a1f5159089ccd2f4f0002">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define PARSER   1</span>
<a name="l00101"></a><a class="code" href="v4l2__backend__test_8h.html#c8e42177b11cae288359d22ce96c99a5">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define PARSER_DECODER 2</span>
<a name="l00102"></a><a class="code" href="v4l2__backend__test_8h.html#5c2f51b0651f77699a2d07d935e21c5d">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define PARSER_DECODER_VIC 3</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a><a class="code" href="structframe__info__t.html">00104</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00105"></a>00105 {
<a name="l00106"></a><a class="code" href="structframe__info__t.html#0c5a2ce378a82c2102facc678df3f260">00106</a>     uint64_t timestamp;
<a name="l00107"></a><a class="code" href="structframe__info__t.html#6e3b8ee554bce2effd3ebcbc2dbb6718">00107</a>     <span class="keyword">struct </span>timeval input_time;
<a name="l00108"></a><a class="code" href="structframe__info__t.html#e71b50f594e96e3135a0d6b484f68f10">00108</a>     <span class="keyword">struct </span>timeval output_time;
<a name="l00109"></a><a class="code" href="structframe__info__t.html#409f2a664b1e19e3c1c92df24e78c436">00109</a>     <a class="code" href="v4l2__backend__test_8h.html#aa8ea00b42634ed067daa4bf77ffbd4e">slice_type_e</a> slice_type;
<a name="l00110"></a><a class="code" href="structframe__info__t.html#39bfaaec2bbd067db87ec90f2b6d7176">00110</a>     <a class="code" href="v4l2__backend__test_8h.html#4979a7e8abf8288f16ecf3202bb57452">nal_type_e</a> nal_type;
<a name="l00111"></a><a class="code" href="structframe__info__t.html#1bb81cdbc2d36c3481a419791ed0ea72">00111</a>     uint32_t ref;
<a name="l00112"></a>00112 } <a class="code" href="structframe__info__t.html">frame_info_t</a>;
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="structframe__bbox.html">00114</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00115"></a>00115 {
<a name="l00116"></a><a class="code" href="structframe__bbox.html#30b54b2a1339543c6efa76918fe9560a">00116</a>     <a class="code" href="struct__NvOSD__RectParams.html" title="Holds the box parameters of the box to be overlayed.">NvOSD_RectParams</a> *g_rect;
<a name="l00117"></a><a class="code" href="structframe__bbox.html#8105ce83c2986e951868e712571d6058">00117</a>     <span class="keywordtype">int</span>  g_rect_num;
<a name="l00118"></a>00118 } <a class="code" href="structframe__bbox.html">frame_bbox</a>;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00121"></a>00121 {
<a name="l00122"></a>00122     <span class="keyword">struct </span>v4l2_buffer v4l2_buf;
<a name="l00123"></a>00123     <a class="code" href="classNvBuffer.html" title="Class representing a buffer.">NvBuffer</a>           *buffer;
<a name="l00124"></a>00124     <a class="code" href="classNvBuffer.html" title="Class representing a buffer.">NvBuffer</a>           *shared_buffer;
<a name="l00125"></a>00125     <span class="keywordtype">void</span>               *arg;
<a name="l00126"></a>00126     <span class="keywordtype">int</span>                bProcess;
<a name="l00127"></a>00127 } <a class="code" href="structShared__Buffer.html">Shared_Buffer</a>;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00131"></a>00131 {
<a name="l00132"></a><a class="code" href="structcontext__t.html#0a57595288b430911d678caae6309cb5">00132</a>     uint32_t channel;
<a name="l00133"></a><a class="code" href="structcontext__t.html#7ff76283460065f93ae949e0df287cdb">00133</a>     uint32_t dec_status; <span class="comment">//0 stream off, 1 stream on</span>
<a name="l00134"></a>00134     <a class="code" href="classNvVideoDecoder.html" title="Helper class for V4L2 Video Decoder.">NvVideoDecoder</a> *dec;
<a name="l00135"></a>00135     <a class="code" href="classNvVideoConverter.html" title="Helper class for V4L2 Video Converter.">NvVideoConverter</a> *conv;
<a name="l00136"></a>00136 <span class="preprocessor">#ifdef ENABLE_GIE</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>    <a class="code" href="classNvVideoConverter.html" title="Helper class for V4L2 Video Converter.">NvVideoConverter</a> *conv1; <span class="comment">// for algorithm</span>
<a name="l00138"></a>00138 <span class="preprocessor">#endif</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>    uint32_t decoder_pixfmt;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <a class="code" href="classNvEglRenderer.html" title="NvEglRenderer is a helper class for rendering using EGL and OpenGL ES 2.0.">NvEglRenderer</a> *renderer;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     EGLImageKHR egl_image;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="keywordtype">char</span> *in_file_path;
<a name="l00146"></a>00146     std::ifstream *in_file;
<a name="l00147"></a>00147 
<a name="l00148"></a>00148     <span class="keywordtype">char</span> *out_file_path;
<a name="l00149"></a>00149     std::ofstream *out_file;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151     <span class="keywordtype">bool</span> fullscreen;
<a name="l00152"></a><a class="code" href="structcontext__t.html#d42f52abb16ebd76160b365907557b4c">00152</a>     <span class="keywordtype">bool</span> do_stat;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="comment">//0, not test, 1 parser, 2 parser+decoder, 3 parser+decode + VIC</span>
<a name="l00155"></a><a class="code" href="structcontext__t.html#ea4bbbd4a6677fb7d9f011659617096a">00155</a>     uint32_t cpu_occupation_option;
<a name="l00156"></a>00156     uint32_t window_height;
<a name="l00157"></a>00157     uint32_t window_width;
<a name="l00158"></a>00158     uint32_t window_x;
<a name="l00159"></a>00159     uint32_t window_y;
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="keywordtype">float</span> fps;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163     <span class="keywordtype">bool</span> disable_dpb;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <span class="keywordtype">bool</span> input_nalu;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     std::queue &lt; NvBuffer * &gt; *conv_output_plane_buf_queue;
<a name="l00168"></a>00168 <span class="preprocessor">#ifdef ENABLE_GIE</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>    std::queue &lt; NvBuffer * &gt; *conv1_output_plane_buf_queue;
<a name="l00170"></a>00170 <span class="preprocessor">#endif</span>
<a name="l00171"></a><a class="code" href="structcontext__t.html#d4e58a4c2f1aa259bb6ac7f7396b9d6f">00171</a> <span class="preprocessor"></span>    map&lt; uint64_t, frame_info_t* &gt; *frame_info_map;
<a name="l00172"></a><a class="code" href="structcontext__t.html#0b67f903530fa8b2b55afa7330ca955c">00172</a>     <a class="code" href="structwindow__t.html">window_t</a> window[<a class="code" href="v4l2__backend__test_8h.html#c9e445cf41a4652f95e1c2646b548882">WINDOW_NUM</a>];
<a name="l00173"></a>00173 
<a name="l00174"></a>00174     pthread_mutex_t queue_lock; <span class="comment">// for dec and conv</span>
<a name="l00175"></a>00175     pthread_cond_t queue_cond;
<a name="l00176"></a>00176 <span class="preprocessor">#ifdef ENABLE_GIE</span>
<a name="l00177"></a>00177 <span class="preprocessor"></span>    pthread_mutex_t queue1_lock; <span class="comment">// for conv and conv1</span>
<a name="l00178"></a>00178     pthread_cond_t queue1_cond;
<a name="l00179"></a>00179 <span class="preprocessor">#endif</span>
<a name="l00180"></a><a class="code" href="structcontext__t.html#9ec7c3a673e78d509bdb964f044e7c7a">00180</a> <span class="preprocessor"></span>    pthread_mutex_t fps_lock;
<a name="l00181"></a><a class="code" href="structcontext__t.html#e44dde52dca4711058bcb5bcb1fd7513">00181</a>     pthread_cond_t fps_cond;
<a name="l00182"></a>00182 <span class="preprocessor">#ifdef ENABLE_GIE</span>
<a name="l00183"></a>00183 <span class="preprocessor"></span>    sem_t result_ready_sem;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     uint32_t *parray;
<a name="l00186"></a>00186     uint32_t rect_count;
<a name="l00187"></a>00187     pthread_mutex_t osd_lock;
<a name="l00188"></a>00188     std::queue&lt;frame_bbox*&gt; *osd_queue;
<a name="l00189"></a>00189 <span class="preprocessor">#endif</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>    pthread_t dec_capture_loop;
<a name="l00191"></a><a class="code" href="structcontext__t.html#15d666dbcbfed1fb899ca5cfee742f63">00191</a>     pthread_t dec_feed_handle;
<a name="l00192"></a><a class="code" href="structcontext__t.html#9ad71927b98aff3146442a32d3555494">00192</a>     pthread_t render_feed_handle;
<a name="l00193"></a><a class="code" href="structcontext__t.html#e0ce9892703d925418b31885ff508137">00193</a>     std::queue&lt;Shared_Buffer&gt; *render_buf_queue;
<a name="l00194"></a><a class="code" href="structcontext__t.html#0bbc792f3e8dfa9e1985bafebc83ba68">00194</a>     <span class="keywordtype">int</span> stop_render;
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="structcontext__t.html#a6073b5ea3e2c0a97b7df4363f946fb8">00196</a>     pthread_mutex_t render_lock; <span class="comment">// for dec and conv</span>
<a name="l00197"></a><a class="code" href="structcontext__t.html#37fc4e032af0701f074ee26d5fd7d1c0">00197</a>     pthread_cond_t render_cond;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     <span class="comment">//VIC need wait until dec get run</span>
<a name="l00200"></a><a class="code" href="structcontext__t.html#4fc05d6e75e94ede98be5f0c7ed7d87d">00200</a>     sem_t dec_run_sem;
<a name="l00201"></a>00201     <span class="keywordtype">bool</span> got_error;
<a name="l00202"></a>00202     <span class="keywordtype">bool</span> got_eos;
<a name="l00203"></a>00203     <span class="keywordtype">void</span> *nvosd_context;
<a name="l00204"></a>00204 } <a class="code" href="structcontext__t.html">context_t</a>;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="structjpeg__enc__context__t.html">00207</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00208"></a>00208 {
<a name="l00209"></a><a class="code" href="structjpeg__enc__context__t.html#9fc1bfbc8923755d9fd9317ea3240dec">00209</a>     pthread_mutex_t queue_lock;
<a name="l00210"></a><a class="code" href="structjpeg__enc__context__t.html#882fcd14ead29e137d69694a285c7f39">00210</a>     <a class="code" href="classNvJPEGEncoder.html" title="NvJpegEncoder uses the libjpeg APIs for encoding JPEG images.">NvJPEGEncoder</a> *JpegEnc;
<a name="l00211"></a><a class="code" href="structjpeg__enc__context__t.html#4b0815c03fa0da56b32c064854d1eaa0">00211</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pbuf;
<a name="l00212"></a><a class="code" href="structjpeg__enc__context__t.html#c32bc11f14892c4498cc85c3ce1df36d">00212</a>     <span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buf_size;
<a name="l00213"></a><a class="code" href="structjpeg__enc__context__t.html#9c2a8c1a21675a891234447c37cbc43b">00213</a>     <span class="keywordtype">char</span> filename[512];
<a name="l00214"></a>00214 } <a class="code" href="structjpeg__enc__context__t.html">jpeg_enc_context_t</a>;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 
<a name="l00217"></a><a class="code" href="structglobal__cfg.html">00217</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00218"></a>00218 {
<a name="l00219"></a><a class="code" href="structglobal__cfg.html#23ed174fd7fb25d60a01d65f46ecd580">00219</a>     <span class="keywordtype">int</span> dump_jpeg;
<a name="l00220"></a><a class="code" href="structglobal__cfg.html#1f383f47ac1e11e6dfe12ae71d052e1d">00220</a>     <span class="keywordtype">int</span> channel_num;
<a name="l00221"></a><a class="code" href="structglobal__cfg.html#318e4394513187c0189184372cc1bdee">00221</a>     <span class="keywordtype">char</span> *in_file_path[<a class="code" href="v4l2__backend__test_8h.html#6511732d5b29a6781cf38783157f21e1">CHANNEL_NUM</a>];
<a name="l00222"></a>00222 <span class="preprocessor">#ifdef ENABLE_GIE</span>
<a name="l00223"></a>00223 <span class="preprocessor"></span>    <span class="keywordtype">string</span> deployfile;
<a name="l00224"></a>00224     <span class="keywordtype">string</span> modelfile;
<a name="l00225"></a>00225 <span class="preprocessor">#endif</span>
<a name="l00226"></a>00226 <span class="preprocessor"></span>} <a class="code" href="structglobal__cfg.html">global_cfg</a>;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 <span class="keywordtype">int</span> <a class="code" href="video__decode_8h.html#acf063122d19b112b78887af5d2798ab">parse_csv_args</a>(<a class="code" href="structcontext__t.html">context_t</a> * ctx,
<a name="l00229"></a>00229 #ifdef ENABLE_GIE
<a name="l00230"></a>00230     GIE_Context *gie_ctx,
<a name="l00231"></a>00231 #endif
<a name="l00232"></a>00232     <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]);
<a name="l00233"></a>00233 <span class="keywordtype">void</span> <a class="code" href="v4l2__backend__csvparser_8cpp.html#263d4a6cd2d0fc1f01afe5bdc13daa3d">parse_global</a>(<a class="code" href="structglobal__cfg.html">global_cfg</a>* cfg, <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ***argv);
<a name="l00234"></a>00234 <span class="keywordtype">void</span> <a class="code" href="v4l2__backend__csvparser_8cpp.html#402ea961bfc2ffeee61e3a7c330b1559">print_help</a>(<span class="keywordtype">void</span>);
<a name="l00235"></a>00235 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Nov 9 19:52:25 2016 for NVIDIA Tegra Multimedia API Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
