"use strict";angular.module("webadminApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl"}).when("/join",{templateUrl:"views/join.html",controller:"SettingsCtrl"}).when("/info",{templateUrl:"views/info.html",controller:"MainCtrl"}).when("/developers",{templateUrl:"views/developers.html",controller:"MainCtrl"}).when("/support",{templateUrl:"views/support.html",controller:"MainCtrl"}).when("/help",{templateUrl:"views/help.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).otherwise({redirectTo:"/settings"})}]),angular.module("webadminApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("webadminApp").controller("NavigationCtrl",["$scope","$location",function(a,b){a.isActive=function(a){var c=b.path().split("/")[1];return c.split("?")[0]===a.split("/")[1].split("?")[0]}}]),angular.module("webadminApp").directive("navbar",function(){return{restrict:"E",templateUrl:"views/navbar.html",controller:"NavigationCtrl"}}),angular.module("webadminApp").controller("SettingsCtrl",["$scope","$modal","$log","mediaserver",function(a,b,c,d){a.settings=d.settings.get(),a.confirmPassword="",a.openJoinDialog=function(){var d=b.open({templateUrl:"views/join.html",controller:"JoinCtrl",resolve:{items:function(){return a.settings}}});d.result.then(function(a){c.info(a)},function(){c.info("Modal dismissed at: "+new Date)})},a.save=function(){d.settings.save(a.settings)},a.restart=function(){d.restart()}}]),angular.module("webadminApp").controller("JoinCtrl",["$scope","$modalInstance","$interval","mediaserver",function(a,b,c,d){a.url="",a.password="",a.testProgressBarVisible=!1,a.testProgress=0,a.test=function(){a.testProgress=0,d.ping.get();var b=c(function(){return a.testProgress>=100?(a.testProgressBarVisible=!1,c.cancel(b),void console.log("done")):(a.testProgressBarVisible=!0,void a.testProgress++)},100)},a.join=function(){b.close({url:a.url,password:a.password})},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("webadminApp").factory("mediaserver",["$http","$resource",function(a,b){return{ping:b("/ec2/ping"),settings:b("/ec2/settings"),restart:function(){return a.post("/ec2/restartServer")}}}]),angular.module("webadminApp").directive("nxEqualEx",function(){return{require:"ngModel",link:function(a,b,c,d){return c.nxEqualEx?(a.$watch(c.nxEqualEx,function(a){void 0!==d.$viewValue&&""!==d.$viewValue&&(d.$setValidity("nxEqualEx",a===d.$viewValue),console.log("set valid to "+(a===d.$viewValue)))}),void d.$parsers.push(function(b){if(void 0===b||""===b)return d.$setValidity("nxEqualEx",!0),console.log("set valid to true"),b;var e=b===a.$eval(c.nxEqualEx);return d.$setValidity("nxEqualEx",e),console.log("set valid to "+e),e?b:void 0})):void console.error("nxEqualEx expects a model as an argument!")}}}),angular.module("webadminApp").controller("LoginCtrl",["$scope","auth",function(a,b){a.login=function(){a.loginForm.$valid?b.login(a.user):a.loginForm.submitted=!0}}]),angular.module("webadminApp").service("auth",["$http",function(a){this.login=function(b){return a.post("/ec2/login",{username:b.username,password:b.password})}}]);