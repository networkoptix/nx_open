<div class="container">

    <ng-include src="Config.viewsDir + 'devtools/feedback.html'"></ng-include>
    <h1>Test API calls</h1>
    <p><a href="api.xml" target="_blank">API documentation</a></p>
    <form class="form-horizontal" novalidate>
        <div class="form-group">
            <label class="col-sm-2 control-label">Method</label>
            <div class="col-sm-10">
                <select ng-model="session.method.method" class="form-control">
                    <option>POST</option>
                    <option>GET</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Method</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" ng-model="session.method.name" placeholder="/api/methodName">
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-2 control-label"><b>GET</b>-params</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" ng-model="session.method.params" placeholder="param1=value1&param2=value2">
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-2 control-label">Requesting URL</label>
            <div class="col-sm-10">
                <p class="form-control-static">{{getDebugUrl()}}</p>
            </div>
        </div>

        <div class="form-group" ng-if="session.method.method=='POST'">
            <label class="col-sm-2 control-label"><b>POST</b>-params (json)</label>
            <div class="col-sm-10">
                <textarea class="form-control" rows="10"
                          ng-model="session.method.data"></textarea>
            </div>
        </div>


        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary" ng-click="testMethod()">Test method</button>
                <a class="btn btn-default" ng-if="session.method.method=='GET'" ng-href="{{getDebugUrl()}}" target="_blank">Open in a new tab</a>
            </div>
        </div>


        <div class="form-group" ng-if="result.result">
            <label class="col-sm-2 control-label">Status</label>
            <div class="col-sm-10">
                <p class="form-control-static">{{result.status}}</p>
            </div>
        </div>
        <div class="form-group" ng-if="result.result">
            <label class="col-sm-2 control-label">Result</label>
            <div class="col-sm-10">
                <pre>{{result.result}}</pre>
            </div>
        </div>
    </form>


</div>
