#pragma once

#include <nx/vms/api/data/module_information.h>

#include <nx/fusion/model_functions_fwd.h>

namespace nx::vms::utils {

/**
 * Information generated by the installer during installation.
 */
struct NX_VMS_UTILS_API InstallationInfo
{
    nx::vms::api::HwPlatform hwPlatform = nx::vms::api::HwPlatform::unknown;
};
#define InstallationInfo_Fields (hwPlatform)
QN_FUSION_DECLARE_FUNCTIONS_FOR_TYPES((nx::vms::utils::InstallationInfo), (json))

/**
 * On first call, loads the values from /opt/<linuxOrganizationName>/installation_info.json.
 *
 * Currently it is supported only on Linux or macOS; on other platforms all fields have default
 * values.
 */
NX_VMS_UTILS_API const InstallationInfo& installationInfo();

} // namespace nx::vms::utils
