# Executes at the build phase. Creates and populates the SDK directory to be zipped.

# Receive variable values from the calling CMakeList.txt.
set(sdk_name @sdk_name@)
set(CMAKE_CURRENT_BINARY_DIR @CMAKE_CURRENT_BINARY_DIR@)
set(CMAKE_SOURCE_DIR @CMAKE_SOURCE_DIR@)
set(nx_sdk_version_file @nx_sdk_version_file@)
set(copied_static_origin @copied_static_origin@)
set(copied_static_files @copied_static_files@)
set(copied_nx_kit_origin @copied_nx_kit_origin@)
set(copied_nx_kit_files @copied_nx_kit_files@)
set(copied_nx_sdk_src_nx_origin @copied_nx_sdk_src_nx_origin@)
set(copied_nx_sdk_src_nx_files @copied_nx_sdk_src_nx_files@)
set(copied_nx_sdk_unit_tests_origin @copied_nx_sdk_unit_tests_origin@)
set(copied_nx_sdk_unit_tests_files @copied_nx_sdk_unit_tests_files@)
set(copied_sample_1_origin @copied_sample_1_origin@)
set(copied_sample_1_files @copied_sample_1_files@)
set(copied_sample_1_target @copied_sample_1_target@)
set(copied_sample_2_origin @copied_sample_2_origin@)
set(copied_sample_2_files @copied_sample_2_files@)
set(copied_sample_2_target @copied_sample_2_target@)
set(copied_sample_unit_tests_origin @copied_sample_unit_tests_origin@)
set(copied_sample_unit_tests_files @copied_sample_unit_tests_files@)
set(copied_sample_unit_tests_target @copied_sample_unit_tests_target@)

include(${CMAKE_SOURCE_DIR}/cmake/utils.cmake)

set(target_dir ${CMAKE_CURRENT_BINARY_DIR}/${sdk_name})

file(COPY ${nx_sdk_version_file} DESTINATION ${target_dir}/src)

nx_copy_always(${copied_static_origin} "${copied_static_files}"
    ${target_dir})
nx_copy_always(${copied_nx_kit_origin} "${copied_nx_kit_files}"
    ${target_dir}/nx_kit)
nx_copy_always(${copied_nx_sdk_src_nx_origin} "${copied_nx_sdk_src_nx_files}"
    ${target_dir}/src/nx)
nx_copy_always(${copied_nx_sdk_unit_tests_origin} "${copied_nx_sdk_unit_tests_files}"
    ${target_dir}/unit_tests)
nx_copy_always(${copied_sample_1_origin} "${copied_sample_1_files}"
    ${target_dir}/samples/${copied_sample_1_target})
nx_copy_always(${copied_sample_2_origin} "${copied_sample_2_files}"
    ${target_dir}/samples/${copied_sample_2_target})
nx_copy_always(${copied_sample_unit_tests_origin} "${copied_sample_unit_tests_files}"
    ${target_dir}/samples/${copied_sample_unit_tests_target})
    
nx_copy_always(${CMAKE_SOURCE_DIR}/open "${CMAKE_SOURCE_DIR}/open/licenses"
    ${target_dir})
